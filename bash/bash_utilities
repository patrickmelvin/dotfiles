# Open latest migration file
last_migration() {
  vim db/migrate/$(ls db/migrate/ | sort | tail -1)
}

nth_migration() {
  vim db/migrate/$(ls db/migrate/ | sort | tail -$1)
}

find_task() {
  bundle exec rake -T | grep $1
}

run_modified_specs() {
  bundle exec rspec $(git status -s | grep _spec.rb | cut -b 3-) --tag integration
}

git_diff_relative() {
  git diff --no-prefix --src-prefix=$(git rev-parse --show-cdup) --dst-prefix=$(git rev-parse --show-cdup) $@
}

# Require renogen
rgen() {
  renogen new $1
  vim change_log/next/$1.yml
}
